---
title: 交叉编译GCC-4.8.4
date: 2015-05-09 18:52:07
tags:
- 嵌入式
categories:
- Linux
---

#### 编译步骤

```
./configure --prefix=/usr --build=x86_64-linux-gnu --host=arm-linux-gnueabi --target=arm-linux-gnueabi --disable-multilib --disable-nls --enable-languages=c,c++ --disable-libstdcxx-pch --disable-libssp --enable-checking=release --enable-libstdcxx-time --with-gmp=$ROOTFS/usr --with-mpfr=$ROOTFS/usr --with-cloog=$ROOTFS/usr --with-mpc=$ROOTFS/usr --with-zlib=$ROOTFS/usr

make 

make install
```


### 问题

在第二步`make`时会报错
```
checking for type equivalent to int8_t... configure: error: no 8-bit type, please report a bug
```

原因是`libatomic`的`configure`文件中设置的`CFLAGS`有问题，打开`libatomic/configure`，找到以下地方：
```
11401 # Disable fallbacks to __sync routines from libgcc.  Otherwise we'll
11402 # make silly decisions about what the cpu can do.
11403 CFLAGS="$save_CFLAGS -fno-sync-libcalls $XCFLAGS"
```

改为

```
11401 # Disable fallbacks to __sync routines from libgcc.  Otherwise we'll
11402 # make silly decisions about what the cpu can do.
11403 CFLAGS="$save_CFLAGS $XCFLAGS"
```

重新`make`即可.