---
title: Oprofile-1.0.0使用方法
date: 2015-03-16 22:27:17
tags:
- Oprofile
- 性能
categories:
- Linux
---

2014年09月，linux下的程序性能分析工具oprofile发布了1.0.0版本。最大的改变是删除了传统的基于opcontrol的控制方式，而是用operf替代。同时还添加了一些新的处理器模型，以及其他的一些BUG修复[(链接在此)](http://oprofile.sourceforge.net/news/)。

新版简化了使用的流程，不用再执行
```
opcontrol --init
opcontrol --start

program

opcontrol --dump
opcontrol --stop

opreport
```

使用新的`operf`命令，只需要执行以下语句
```
operf --callgraph --events CPU_CYCLES:100000:0:1:1,\
L1D_CACHE:10000:0:1:1,\
L2D_CACHE:10000:0:1:1,\
BUS_ACCESS:100000:0:1:1,\
BUS_CYCLES:100000:0:1:1,\
UNALIGNED_LDST_RETIRED:10000:0:1:1 \
./program

opreport
```