---
title: 设置PCIE配置空间寄存器
date: 2015-05-16 18:20:56
tags: 
- PCIE
categories: 
- Linux
---

###1 查看

```
lspci                    # 查看简要描述信息
lspci -s mm:mm.m         # 查看特定设备的信息(m代表PCIE节点信息)
lspci -s mm:mm.m -xxx    # 以16进制查看特定PCI设备配置空间前64Byte的信息
```

**例子**
```
lijg@ubuntudesktop:~$ sudo lspci -s 03:00.0 -xxx
03:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller (rev 06)
00: ec 10 68 81 07 04 10 00 06 00 00 02 10 00 00 00
10: 01 d0 00 00 00 00 00 00 0c 40 00 f0 00 00 00 00
20: 0c 00 00 f0 00 00 00 00 00 00 00 00 58 14 00 e0
30: 00 00 00 00 40 00 00 00 00 00 00 00 0b 01 00 00
40: 01 50 c3 ff 08 00 00 00 00 00 00 00 00 00 00 00
50: 05 70 81 00 0c 10 e0 fe 00 00 00 00 71 41 00 00
60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
70: 10 b0 02 02 c0 8c 90 05 00 50 10 00 11 7c 07 00
80: 40 00 11 10 00 00 00 00 00 00 00 00 00 00 00 00
90: 00 00 00 00 1f 00 00 00 00 00 00 00 00 00 00 00
a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
b0: 11 d0 03 00 04 00 00 00 04 08 00 00 00 00 00 00
c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
d0: 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
```

###2 设置
```
setpci    # 设置PCIE配置寄存器
```

写PCI配置寄存器时，使用`地址.位宽=值`的语法设置，如
```
setpci -s 03:00.0 62.B=05   # 配置0x62地址的字节的值为0x05
setpci -s 03:00.0 62.W=0500 # 配置0x62地址的半字的值为0x0500,等效于，

setpci -s 03:00.0 62.B=00
setpci -s 03:00.0 63.B=05
```
