---
title: 制作系统linux镜像文件
date: 2015-11-26 10:07:36
tags:
categories: 
- Linux
---

# 如何制作一个可以直接dd到sd卡的linux系统镜像文件

linux中常见的以img结尾的镜像文件,可以直接dd到sd卡或sata硬盘使用,也可以通过qemu使用,制作方法如下:

## 1 创建
```
# 初始化一个4G大小的系统镜像
dd if=/dev/zero of=./rootfs.img bs=1M seek=4096
```

## 2 制作文件系统
```
# 使用ext4文件系统格式化镜像
mkfs.ext4 -F ./rootfs.img
```

## 3 拷贝文件
```
# 挂载镜像
sudo mount -o loop ./rootfs.img /mnt

# 拷贝文件
sudo cp -ar /path/to/rootfs/* /mnt

# 卸载
sudo umount /mnt
```

此时制作好的系统镜像可以拿去直接dd到sd卡使用.