---
title: 让i.MX6使用Debian文件系统
date: 2015-12-21 13:09:35
tags: 
- i.MX6 
- Debian
categories: 
- Linux
---

从`Debian 4.0`开始，`Debian`已经开始支持`ARM`处理器，所以在`i.MX6`上安装`Debian`文件系统并不麻烦。

在i.MX6上使用`Debian`文件系统的优点有：
* 所有软件包、库都经过官方筛选、打补丁
* `Debian`一直已稳定性为人津津乐道，由于`ARM`版使用的软件包与`X86`版本是同样的源码，只是编译器不一样，所以稳定性也能够保证
* 由于`ARM`版使用的软件包与`X86`版本是同样的版本，从`ARM`版迁移至`X86`时，不存在由于库版本不兼容导致的问题
* 软件库丰富！！！ 基本上`X86`上有的软件包，`ARM`上都有。所以，常用的软件包不用自行编译，直接`apt-get install`安装

## 1. 准备开发环境

必须使用`ubuntu`或`debian`作为开发环境系统，并安装以下工具。
```
# 安装必要的工具
apt-get install debootstrap qemu-user-static binfmt-support
```

准备一个文件夹，用来保存生成好的文件系统
```
# 用来保存生成的文件系统
mkdir ~/debianfs
```

## 2. 生成文件系统
```
# 从官方镜像下载文件系统，使用`debian-8.2(jeesis)`
sudo debootstrap --foreign --arch=armhf jeesie ~/debianfs

# 也可以指定镜像地址（加快下载速度）
# sudo debootstrap --foreign --arch=armhf jeesie ~/debianfs http://ftp.cn.debian.org/debian
```

## 3. 初始化文件系统
初始化文件系统时，需要`chroot`到文件系统中，但由于开发机一般为`X86`，所以需要用到`qemu-arm`工具
```
sudo cp /usr/bin/qemu-arm-static ~/debianfs/usr/bin
sudo chroot ~/debianfs /debootstrap/debootstrap --second-stage
```

## 3. 配置

修改`root`密码
```
vim ~/debian/etc/shadow
# 删除代表密码域的*号 
```

添加串口终端
```
echo "T0:23:respawn:/sbin/getty -L ttymxc0 115200 vt100" >> ~/debianfs/etc/inittab
```

完。