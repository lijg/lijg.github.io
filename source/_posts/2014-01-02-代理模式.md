---
title: 代理模式
date: 2014-01-02 23:20:10
tags: 设计模式
categories: 软件
---

>代理模式(Proxy)，为其他对象提供一种代理以控制对这个对象的访问。隐藏真实对象。

结构图：

![Image Title](/images/2014-01-03/proxy_mode.png)

实例代码：

* Subject类
```
abstract class Subject {
    public abstract void Request();
}
```

* RealSubject类
```
class RealSubject : Subject {
    public override void Request() {
        // 真实操作
    }
}
```

* Proxy类
```
class Porxy : Subject {
    RealSubject realsubject;
    public override void Request() {
        if (realsubject == null) {
            realsubject = new RealSubject();
        }
        realsubject.Request();
    }
}
```

* 客户端代码
```
static void Main(string[] args) {
    Proxy proxy = new Proxy();
    proxy.Request();
}
```


**代理模式的应用**

1. 远程代理，为一个对象在不同的地址空间提供局部代表。这样可以隐藏一个对象存在于不同的地址空间的事实。
2. 虚拟代理，根据需要创建开销很大的对象。通过它来存放实例化需要很长时间的真实对象。
3. 安全代理，用来控制真实对象的访问权限。
4. 只能指引，当调用真实的对象时，代理处理另外的一些事情。

>**代理模式其实就是在访问对象是引入一定程度的间接性，因为这种间接性，可以附加多种用途。**

>**装饰模式其实也可以算是一种代理模式，多个装饰相当于多层代理**