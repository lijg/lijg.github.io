---
title: Docker学习笔记
date: 2015-09-10 19:39:42
tags: Docker
categories: Linux
---

# 1 启动交互容器

下面的命令则启动一个`bash`终端，允许用户进行交互。
```
normal$ sudo docker run -t -i ubuntu:14.04 /bin/bash
root@af8bae53bdd3:/#
```
其中，`-t`选项让`Docker`分配一个伪终端（`pseudo-tty`）并绑定到容器的标准输入上，`-i`则让容器的标准输入保持打开。

# 2 启动守护进程容器

通过`-d`参数来启动一个容器，并让其在后台执行。大部分的应用都应该采用这种模式。

# 3 进入容器 

在使用`-d`参数时，容器启动后会进入后台。 某些时候需要进入容器进行操作，有很多种方法，包括使用`docker attach`命令或`nsenter`工具等。

# 4 删除容器

用`docker rm [NAME]`命令来删除一个停止运行的容器。如果数量太多要一个个删除可能会很麻烦，用`docker rm $(docker ps -a -q)`可以全部清理掉。

# 5 自定义容器名称 

使用`--name`标记可以为容器自定义命名。


# 6 外部网络连接

容器需要进行外部网络连接时，必须通过端口映射实现，将需要的容器端口映射到主机的某个端口上。

使用`-P`或`-p`参数来指定端口映射。

当使用`-P`标记时，`Docker`会随机映射一个`49000~49900`的端口到内部容器开放的网络端口。

使用`-p`（小写的）则可以指定要映射的端口，并且，在一个指定端口上只可以绑定一个容器。支持的格式有
```
ip:hostPort:containerPort | ip::containerPort | hostPort:containerPort。
```
使用`docker port`来查看当前映射的端口配置，也可以查看到绑定的地址

# 7 容器互联

使用`--link`参数可以让容器之间安全的进行交互。`--link`参数的格式为`--link name:alias`，其中`name`是要链接的容器的名称，`alias`是这个连接的别名。

`Docker`在两个互联的容器之间创建了一个安全隧道，而且不用映射它们的端口到宿主主机上，从而避免了暴露关键数据库到外部网络上。

`Docker`通过`2`种方式为容器公开连接信息：
1. 环境变量；
2. 更新父容器的`/etc/hosts`文件；